kind: ConfigMap
metadata:
  name: microservicio-app-config
  namespace: ns-app-dev
  labels:
    app: microservicio-app
data:
  # application.yaml se monta como archivo en el contenedor
  # Spring Boot lo lee autom√°ticamente desde /app/config/application.yaml
  application.yaml: |
    api:
      external:
        auth:
          timeout: 5000
          url: http://auth-service-dev.internal/api/v1
        notification:
          timeout: 3000
          url: http://notification-service-dev.internal/api/v1
        payment:
          timeout: 10000
          url: http://payment-service-dev.internal/api/v1
    cache:
      enabled: false
      redis:
        database: 0
        host: redis-dev.internal
        port: 6379
      ttl: 300
    custom:
      businessLogic:
        maxRetries: 3
        timeout: 5000
    features:
      betaFeatures:
        enabled: true
      maintenance:
        enabled: false
      newUI:
        enabled: true
    logging:
      level:
        application: DEBUG
        root: DEBUG
        springframework: INFO
        web: DEBUG
      pattern:
        console: '%d{yyyy-MM-dd HH:mm:ss} - %msg%n'
    management:
      endpoint:
        health:
          probes:
            enabled: true
          showDetails: always
      endpoints:
        web:
          basePath: /
          exposure:
            include: health,info,metrics
      health:
        liveness:
          enabled: true
        readiness:
          enabled: true
    server:
      port: 8080
    spring:
      datasource:
        driverClassName: org.postgresql.Driver
        hikari:
          connectionTimeout: 30000
          maximumPoolSize: 10
          minimumIdle: 2
        url: jdbc:postgresql://db-dev.internal:5432/myapp_dev
        username: myapp_user
# Source: microservicio-base/templates/service.yaml
apiVersion: v1
